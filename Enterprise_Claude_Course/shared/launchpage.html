<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Enterprise Claude</title>
    <script src="scormfunctions.js" type="text/javascript"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            color: #1e293b;
        }
        
        #contentFrame {
            border: none;
            background: transparent;
            height: 100vh;
            width: 100vw;
            position: fixed;
            top: 0;
            left: 0;
            display: block;
        }
        
        #navDiv {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            display: flex;
            gap: 0.75rem;
            z-index: 1000;
        }
        
        #navDiv input[type="button"] {
            background: linear-gradient(135deg, #F16F00 0%, #e91e63 50%, #9c27b0 100%);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 0.875rem 1.5rem;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            min-width: 100px;
            letter-spacing: 0.025em;
        }
        
        #navDiv input[type="button"]:hover:not(:disabled) {
            background: linear-gradient(135deg, #e55a00 0%, #d81b60 50%, #7b1fa2 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        
        #navDiv input[type="button"]:disabled {
            background: rgba(148, 163, 184, 0.5);
            color: #64748b;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            border: 2px solid #F16F00;
        }
        
        .modal h3 {
            color: #F16F00;
            margin-bottom: 1rem;
            font-size: 1.25rem;
        }
        
        .modal p {
            color: #4a5568;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }
        
        .modal-buttons {
            display: flex;
            gap: 0.75rem;
            justify-content: flex-end;
        }
        
        .modal-btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .modal-btn-primary {
            background: linear-gradient(135deg, #F16F00 0%, #e91e63 100%);
            color: white;
        }
        
        .modal-btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }
        
        .modal-btn:hover {
            transform: translateY(-1px);
        }
    </style>
    <script type="text/javascript">
    function showModal(title, message, showCancel = false) {
        return new Promise((resolve) => {
            const overlay = document.createElement('div');
            overlay.className = 'modal-overlay';
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.innerHTML = "<h3>" + title + "</h3><p>" + message + "</p><div class='modal-buttons'>" +
                (showCancel ? "<button class='modal-btn modal-btn-secondary' onclick='closeModal(false)'>Cancel</button>" : "") +
                "<button class='modal-btn modal-btn-primary' onclick='closeModal(true)'>OK</button></div>";
            overlay.appendChild(modal);
            document.body.appendChild(overlay);
            window.closeModal = function(result) {
                document.body.removeChild(overlay);
                resolve(result);
            };
        });
    }

    var pageArray = new Array(5);
    pageArray[0] = "Introduction/Introduction.html";
    pageArray[1] = "EnterpriseAdmin/AdminConsole.html";
    pageArray[2] = "EnterpriseAdmin/SSOSecurity.html";
    pageArray[3] = "ProsAndCons/ProsAndCons.html";
    pageArray[4] = "FinalAssessment/assessment.html";

    var currentPage = null;
    var startTimeStamp = null;
    var processedUnload = false;
    var reachedEnd = false;

    function doStart(){
        startTimeStamp = new Date();
        ScormProcessInitialize();
        var completionStatus = ScormProcessGetValue("cmi.core.lesson_status");
        if (completionStatus == "not attempted"){
            ScormProcessSetValue("cmi.core.lesson_status", "incomplete");
        }
        var bookmark = ScormProcessGetValue("cmi.core.lesson_location");
        if (bookmark == ""){
            currentPage = 0;
            goToPage();
        } else {
            showModal('Resume Course', 'Would you like to resume from where you previously left off?', true).then((result) => {
                currentPage = result ? parseInt(bookmark, 10) : 0;
                goToPage();
            });
        }
    }

    function goToPage(){
        var theIframe = document.getElementById("contentFrame");
        theIframe.src = "../" + pageArray[currentPage];
        document.getElementById("butPrevious").disabled = (currentPage == 0);
        document.getElementById("butNext").disabled = (currentPage == (pageArray.length - 1));
        ScormProcessSetValue("cmi.core.lesson_location", currentPage);
    }

    function doUnload(){
        if (processedUnload) return;
        processedUnload = true;
        var scormTime = ConvertMilliSecondsToSCORMTime(new Date().getTime() - startTimeStamp.getTime(), false);
        ScormProcessSetValue("cmi.core.session_time", scormTime);
        if (!reachedEnd) ScormProcessSetValue("cmi.core.exit", "suspend");
        ScormProcessFinish();
    }

    function doPrevious(){
        if (currentPage > 0) currentPage--;
        goToPage();
    }

    function doNext(){
        if (currentPage < (pageArray.length - 1)) currentPage++;
        if (currentPage == (pageArray.length - 1)) reachedEnd = true;
        goToPage();
    }

    function ConvertMilliSecondsToSCORMTime(intTotalMilliseconds, blnIncludeFraction){
        var intSeconds = Math.floor(intTotalMilliseconds / 1000) % 60;
        var intMinutes = Math.floor(intTotalMilliseconds / 60000) % 60;
        var intHours = Math.floor(intTotalMilliseconds / 3600000);
        return ZeroPad(intHours, 4) + ":" + ZeroPad(intMinutes, 2) + ":" + ZeroPad(intSeconds, 2) + (blnIncludeFraction ? ".00" : "");
    }

    function ZeroPad(intNum, intNumDigits){
        var str = intNum.toString();
        while(str.length < intNumDigits) str = "0" + str;
        return str;
    }
    </script>
</head>
<body onload="doStart();" onbeforeunload="doUnload();" onunload="doUnload();">
    <iframe id="contentFrame" src="about:blank"></iframe>
    <div id="navDiv">
        <input type="button" value="< Previous" id="butPrevious" onclick="doPrevious();"/>
        <input type="button" value="Next >" id="butNext" onclick="doNext();"/>
        <input type="button" value="Exit" id="butExit" onclick="doUnload(); window.close();"/>
    </div>
</body>
</html>
